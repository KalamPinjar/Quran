<div class="flex justify-center items-center bg-gray-200 mb-5 w-1/2 h-fit">
  <div class="bg-gray-100 shadow-lg p-6 w-full">
    <audio id="myAudio">
      <source src="<%= audio.audio %>" type="audio/mpeg" />
    </audio>

    <div class="flex items-center mb-6">
      <div>
        <h2 class="font-semibold text-xl">
          <%= surah.englishName %> <%= surah.name %>
        </h2>
        <p class="text-gray-600 text-sm">
          (<%= surah.englishNameTranslation%>)<br />
          <%= surah.revelationType %> (Numbers of Ayahs: <%= surah.numberOfAyahs
          %>)
        </p>
      </div>
    </div>

    <div class="flex justify-center items-center space-x-4">
      <button
        class="bg-gray-900 p-2 rounded-sm w-full max-w-10 h-full max-h-10 text-white"
        id="playPauseBtn"
      >
        <i class="fa-lg fa-play fas"></i>
      </button>

      <button
        class="bg-gray-900 p-2 rounded-sm w-full max-w-10 h-full max-h-10 text-white"
        id="muteBtn"
      >
        <i class="fa-lg fa-volume-up fas"></i>
      </button>

      <input
        type="range"
        min="0"
        max="1"
        step="0.05"
        value="1"
        class="bg-gray-300 w-full h-2 appearance-none hover-none outline-none"
        id="volumeSlider"
      />
    </div>
  </div>
</div>

<script>
  const audio = document.getElementById("myAudio");
  const playPauseBtn = document.getElementById("playPauseBtn");
  const muteBtn = document.getElementById("muteBtn");
  const volumeSlider = document.getElementById("volumeSlider");

  let lastVolume = 1;

  playPauseBtn.addEventListener("click", () => {
    if (audio.paused) {
      audio.play();
      playPauseBtn.querySelector("i").classList.replace("fa-play", "fa-pause");
    } else {
      audio.pause();
      playPauseBtn.querySelector("i").classList.replace("fa-pause", "fa-play");
    }
  });

  muteBtn.addEventListener("click", () => {
    if (audio.muted) {
      audio.muted = false;
      audio.volume = lastVolume;
      volumeSlider.value = lastVolume;
    } else {
      lastVolume = audio.volume;
      audio.muted = true;
      volumeSlider.value = 0;
    }
    muteBtn.querySelector("i").classList.toggle("fa-volume-up");
    muteBtn.querySelector("i").classList.toggle("fa-volume-mute");
  });

  volumeSlider.addEventListener("input", () => {
    audio.volume = volumeSlider.value;

    if (volumeSlider.value > 0 && audio.muted) {
      audio.muted = false;
      muteBtn.querySelector("i").classList.remove("fa-volume-off");
      muteBtn.querySelector("i").classList.add("fa-volume-up");
    }

    lastVolume = volumeSlider.value;
  });
</script>
